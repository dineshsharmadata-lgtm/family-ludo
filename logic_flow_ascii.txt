â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FAMILY LUDO - SYSTEM ARCHITECTURE                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. INITIALIZATION FLOW                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Browser Load
         â”‚
         â–¼
    DOMContentLoaded â”€â”€â”€â”€â”€â”€â–º init()
         â”‚                      â”‚
         â”‚                      â”œâ”€â”€â–º setupEventListeners()
         â”‚                      â”œâ”€â”€â–º createPathCells() (draw board)
         â”‚                      â””â”€â”€â–º checkIfJoining()
         â”‚                               â”‚
         â”‚                               â”œâ”€â”€â”€ URL has ?game=XXX? â”€â”€â”€â”
         â”‚                               â”‚                           â”‚
         â”‚                               NO                         YES
         â”‚                               â”‚                           â”‚
         â”‚                               â–¼                           â–¼
         â”‚                          Wait for                   joinAsPlayer(code)
         â”‚                          Admin Login                      â”‚
         â”‚                                                           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ADMIN FLOW (Host Device)                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    User enters password
         â”‚
         â–¼
    checkAdminPassword() â”€â”€â”€â–º Password == "family2024"? â”€â”€â”€â”
         â”‚                                                  â”‚
         â”‚                                                 YES
         â”‚                                                  â”‚
         â–¼                                                  â–¼
    isAdmin = true                              initializeAdmin()
                                                         â”‚
                                                         â–¼
                                                 Create PeerJS Peer
                                                         â”‚
                                                         â–¼
                                                 peer.on('open', id)
                                                         â”‚
                                                         â”œâ”€â”€â–º myPlayerId = id
                                                         â”œâ”€â”€â–º gameCode = id
                                                         â”œâ”€â”€â–º Generate share link
                                                         â””â”€â”€â–º Add 2 default slots
                                                         
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ADMIN PLAYER SETUP                                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ â€¢ addPlayerSetup()                           â”‚  â”‚
    â”‚  â”‚   â””â”€â–º Create slot {name, color, avatar}     â”‚  â”‚
    â”‚  â”‚                                              â”‚  â”‚
    â”‚  â”‚ â€¢ renderPlayerSetup()                        â”‚  â”‚
    â”‚  â”‚   â””â”€â–º Show UI for each slot                 â”‚  â”‚
    â”‚  â”‚       â”œâ”€ Avatar upload                       â”‚  â”‚
    â”‚  â”‚       â”œâ”€ Name input                          â”‚  â”‚
    â”‚  â”‚       â”œâ”€ Color dropdown                      â”‚  â”‚
    â”‚  â”‚       â””â”€ Remove button                       â”‚  â”‚
    â”‚  â”‚                                              â”‚  â”‚
    â”‚  â”‚ â€¢ updatePlayerName/Color/Avatar()            â”‚  â”‚
    â”‚  â”‚   â””â”€â–º broadcastGameState()                  â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  INCOMING CONNECTIONS                              â”‚
    â”‚  peer.on('connection', conn)                       â”‚
    â”‚         â”‚                                          â”‚
    â”‚         â–¼                                          â”‚
    â”‚  setupConnection(conn)                             â”‚
    â”‚         â”‚                                          â”‚
    â”‚         â”œâ”€â”€â–º conn.on('open')                       â”‚
    â”‚         â”‚      â””â”€â–º connections.push(conn)          â”‚
    â”‚         â”‚                                          â”‚
    â”‚         â”œâ”€â”€â–º conn.on('data', handleMessage)        â”‚
    â”‚         â”‚                                          â”‚
    â”‚         â””â”€â”€â–º conn.on('close')                      â”‚
    â”‚                â””â”€â–º remove from connections[]       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  START GAME                                        â”‚
    â”‚  startGameAsAdmin()                                â”‚
    â”‚         â”‚                                          â”‚
    â”‚         â”œâ”€â”€â–º Initialize tokens for each color     â”‚
    â”‚         â”‚    (position=-1 = "in home")            â”‚
    â”‚         â”‚                                          â”‚
    â”‚         â”œâ”€â”€â–º gameState.gameStarted = true         â”‚
    â”‚         â”œâ”€â”€â–º gameState.currentTurn = players[0]   â”‚
    â”‚         â”‚                                          â”‚
    â”‚         â”œâ”€â”€â–º broadcast({type:'gameStart'})        â”‚
    â”‚         â””â”€â”€â–º startGamePlay()                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. PLAYER FLOW (Joining Device)                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Open link: ?game=ADMIN_PEER_ID
         â”‚
         â–¼
    joinAsPlayer(code)
         â”‚
         â”œâ”€â”€â–º Create PeerJS Peer
         â”‚
         â–¼
    peer.on('open', id)
         â”‚
         â”œâ”€â”€â–º myPlayerId = id
         â””â”€â”€â–º conn = peer.connect(admin_code)
                   â”‚
                   â–¼
              setupConnection(conn)
                   â”‚
                   â”œâ”€â”€â–º conn.on('open')
                   â”‚      â””â”€â–º send({type:'requestGameState'})
                   â”‚
                   â””â”€â”€â–º conn.on('data', handleMessage)
                             â”‚
                             â–¼
                        Receive 'gameState'
                             â”‚
                             â”œâ”€â”€â”€ Game started? â”€â”€â”€â”
                             â”‚                     â”‚
                             NO                   YES
                             â”‚                     â”‚
                             â–¼                     â–¼
                   showPlayerSelection()    Check if already joined
                             â”‚                     â”‚
                             â–¼                     â””â”€â”€â–º startGamePlay()
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Player Slot Cards   â”‚
                   â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”    â”‚
                   â”‚ â”‚ P1  â”‚ â”‚ P2  â”‚    â”‚
                   â”‚ â”‚ Red â”‚ â”‚Greenâ”‚    â”‚
                   â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜    â”‚
                   â”‚ Click to select    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                   selectPlayer(index)
                             â”‚
                             â”œâ”€â”€â–º myPlayerIndex = index
                             â””â”€â”€â–º send({type:'playerSelected'})
                                       â”‚
                                       â–¼
                                  Admin receives
                                       â”‚
                                       â”œâ”€â”€â–º Mark slot as joined
                                       â”œâ”€â”€â–º player.playerId = sender_id
                                       â””â”€â”€â–º broadcastGameState()


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. MESSAGE ROUTING (handleMessage)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    conn.on('data', data) â”€â”€â–º handleMessage(data, conn)
                                      â”‚
                                      â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ switch(data.type)â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                            â”‚                            â”‚
         â–¼                            â–¼                            â–¼
    'requestGameState'           'gameState'              'playerSelected'
         â”‚                            â”‚                            â”‚
    (Admin only)                 (Player)                     (Admin only)
         â”‚                            â”‚                            â”‚
         â–¼                            â–¼                            â–¼
    Send current state      Update local state           Mark slot joined
                            Show selection/game          Broadcast update
         â”‚                            â”‚                            â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                            â”‚                            â”‚
         â–¼                            â–¼                            â–¼
    'gameStart'                'diceRolled'               'tokenMoved'
         â”‚                            â”‚                            â”‚
    Start gameplay             Update dice display         Update tokens
    startGamePlay()            Highlight if my turn        renderBoard()
         â”‚                            â”‚                            â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                            â”‚                            â”‚
         â–¼                            â–¼                            â–¼
    'turnChanged'                'gameOver'
         â”‚                            â”‚
    Update current turn          Show winner screen
    Enable/disable dice          Display winner info


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. GAME LOOP (Turn-Based)                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    TURN CYCLE                               â”‚
    â”‚                                                             â”‚
    â”‚  Current Player's Turn                                      â”‚
    â”‚         â”‚                                                   â”‚
    â”‚         â–¼                                                   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
    â”‚  â”‚ Enable Dice  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
    â”‚  â”‚ (if my turn) â”‚                  â”‚                       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚                       â”‚
    â”‚         â”‚                           â”‚                       â”‚
    â”‚         â–¼                           â”‚                       â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚                       â”‚
    â”‚  â”‚  Roll Dice   â”‚                  â”‚ Roll = 6?             â”‚
    â”‚  â”‚  rollDice()  â”‚                  â”‚ (Extra turn)          â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚                       â”‚
    â”‚         â”‚                           â”‚                       â”‚
    â”‚         â”œâ”€â”€â–º Random 1-6             â”‚                       â”‚
    â”‚         â”œâ”€â”€â–º Update display         â”‚                       â”‚
    â”‚         â””â”€â”€â–º getSelectableTokens()  â”‚                       â”‚
    â”‚                   â”‚                 â”‚                       â”‚
    â”‚                   â–¼                 â”‚                       â”‚
    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚                       â”‚
    â”‚         â”‚ Any valid moves? â”‚        â”‚                       â”‚
    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚                       â”‚
    â”‚                   â”‚                 â”‚                       â”‚
    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚                       â”‚
    â”‚         â”‚                   â”‚       â”‚                       â”‚
    â”‚        YES                 NO       â”‚                       â”‚
    â”‚         â”‚                   â”‚       â”‚                       â”‚
    â”‚         â–¼                   â–¼       â”‚                       â”‚
    â”‚  highlightSelectable()  nextTurn()  â”‚                       â”‚
    â”‚         â”‚                           â”‚                       â”‚
    â”‚         â–¼                           â”‚                       â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚                       â”‚
    â”‚  â”‚ Player Clicksâ”‚                  â”‚                       â”‚
    â”‚  â”‚    Token     â”‚                  â”‚                       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚                       â”‚
    â”‚         â”‚                           â”‚                       â”‚
    â”‚         â”œâ”€â”€â”€ In home? â”€â”€â–º moveTokenFromHome()              â”‚
    â”‚         â”‚                      â”‚                           â”‚
    â”‚         â””â”€â”€â”€ On board? â”€â”€â–º moveToken()                     â”‚
    â”‚                              â”‚                             â”‚
    â”‚                              â–¼                             â”‚
    â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
    â”‚                    â”‚ Update Position  â”‚                    â”‚
    â”‚                    â”‚ Check Capture    â”‚                    â”‚
    â”‚                    â”‚ Check Finish     â”‚                    â”‚
    â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
    â”‚                              â”‚                             â”‚
    â”‚                              â”œâ”€â”€â–º broadcast('tokenMoved')  â”‚
    â”‚                              â”œâ”€â”€â–º renderBoard()            â”‚
    â”‚                              â”‚                             â”‚
    â”‚                              â”œâ”€â”€â–º All tokens finished? â”€â”€â”€â”€â”¤
    â”‚                              â”‚           â”‚                 â”‚
    â”‚                              â”‚          YES                â”‚
    â”‚                              â”‚           â”‚                 â”‚
    â”‚                              â”‚           â–¼                 â”‚
    â”‚                              â”‚    broadcast('gameOver')    â”‚
    â”‚                              â”‚           â”‚                 â”‚
    â”‚                              â”‚          NO                 â”‚
    â”‚                              â”‚           â”‚                 â”‚
    â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                                          â”‚
    â”‚                                          â–¼
    â”‚                                     nextTurn()
    â”‚                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. TOKEN MOVEMENT LOGIC                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    getSelectableTokens(color, roll)
              â”‚
              â–¼
    For each token of my color:
              â”‚
              â”œâ”€â”€â”€ token.finished? â”€â”€â–º SKIP
              â”‚
              â”œâ”€â”€â”€ token.position == -1 (in home)?
              â”‚         â”‚
              â”‚         â””â”€â”€â”€ roll == 6? â”€â”€â–º SELECTABLE
              â”‚
              â”œâ”€â”€â”€ token.inHomeStretch?
              â”‚         â”‚
              â”‚         â””â”€â”€â”€ newPos <= 5? â”€â”€â–º SELECTABLE
              â”‚                              (can't overshoot)
              â”‚
              â””â”€â”€â”€ On main path? â”€â”€â–º SELECTABLE


    moveTokenFromHome(tokenId)
              â”‚
              â”œâ”€â”€â–º Check if start position blocked by own token
              â”‚         â”‚
              â”‚        YES â”€â”€â–º Alert & return
              â”‚         â”‚
              â”‚        NO
              â”‚         â”‚
              â”œâ”€â”€â–º Check for opponent at start position
              â”‚         â”‚
              â”‚        YES & !SAFE_SPOT â”€â”€â–º captureToken()
              â”‚         â”‚
              â”œâ”€â”€â–º token.position = START_POSITIONS[color]
              â”œâ”€â”€â–º broadcast('tokenMoved')
              â”‚
              â””â”€â”€â–º roll == 6? â”€â”€â”¬â”€â–º YES: enableDiceRoll()
                                â””â”€â–º NO: nextTurn()


    moveToken(tokenId)
              â”‚
              â”œâ”€â”€â”€ token.inHomeStretch?
              â”‚         â”‚
              â”‚        YES
              â”‚         â”‚
              â”‚         â”œâ”€â”€â–º newPos = position + roll
              â”‚         â”‚
              â”‚         â”œâ”€â”€â–º newPos == 6? â”€â”€â–º token.finished = true
              â”‚         â”‚                     checkForWinner()
              â”‚         â”‚
              â”‚         â””â”€â”€â–º newPos < 6? â”€â”€â–º token.position = newPos
              â”‚                   â”‚
              â”‚                  ELSE â”€â”€â–º Alert "exact roll needed"
              â”‚
              â””â”€â”€â”€ On main path
                    â”‚
                    â”œâ”€â”€â–º newPos = (position + roll) % 52
                    â”‚
                    â”œâ”€â”€â–º Crossing home stretch entry?
                    â”‚         â”‚
                    â”‚        YES â”€â”€â–º token.inHomeStretch = true
                    â”‚                token.position = overflow
                    â”‚         â”‚
                    â”‚        NO
                    â”‚         â”‚
                    â”œâ”€â”€â–º Check if blocked by own token
                    â”‚         â”‚
                    â”‚        YES â”€â”€â–º Alert & return
                    â”‚         â”‚
                    â”‚        NO
                    â”‚         â”‚
                    â”œâ”€â”€â–º token.position = newPos
                    â”‚
                    â”œâ”€â”€â–º !SAFE_SPOT? â”€â”€â–º Check for opponent
                    â”‚                    captureToken() if found
                    â”‚
                    â””â”€â”€â–º broadcast('tokenMoved')


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. DATA STRUCTURES                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    gameState = {
      players: [
        {
          name: "Player 1",
          color: "red",
          avatar: "data:image/...",  // base64
          playerId: "peer-id-xyz",   // PeerJS ID
          joined: true
        },
        ...
      ],
      
      currentTurn: "red",              // color string
      gameStarted: false,
      
      tokens: {
        red: [
          {
            id: 0,
            position: -1,              // -1 = home, 0-51 = main path
            inHomeStretch: false,
            finished: false
          },
          { id: 1, position: 5, ... },
          { id: 2, position: 12, ... },
          { id: 3, position: -1, ... }
        ],
        green: [...],
        yellow: [...],
        blue: [...]
      },
      
      diceRoll: 6,
      selectableTokens: [0, 2],       // indices of tokens that can move
      winner: null
    }


    connections = [
      conn1,  // PeerJS DataConnection objects
      conn2,
      conn3
    ]


    PATH_POSITIONS = [
      { x: 6.67, y: 40 },    // position 0 (red start)
      { x: 13.33, y: 40 },   // position 1
      ...
      { x: 6.67, y: 46.67 }  // position 50
    ]


    HOME_STRETCH = {
      red: [
        { x: 46.67, y: 40 },  // home stretch position 0
        { x: 53.33, y: 40 }   // home stretch position 1
      ],
      ...
    }


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. RENDERING PIPELINE                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    renderBoard()
         â”‚
         â”œâ”€â”€â–º Remove all existing .token elements
         â”‚
         â”œâ”€â”€â–º For each color's tokens:
         â”‚         â”‚
         â”‚         â”œâ”€â”€â”€ position == -1?
         â”‚         â”‚      â””â”€â–º Add .has-token to home area
         â”‚         â”‚
         â”‚         â””â”€â”€â”€ position >= 0 && !finished?
         â”‚                â”‚
         â”‚                â”œâ”€â”€â”€ inHomeStretch?
         â”‚                â”‚      â””â”€â–º Find home stretch cell
         â”‚                â”‚
         â”‚                â””â”€â”€â”€ On main path?
         â”‚                       â””â”€â–º Find path cell by position
         â”‚                             â”‚
         â”‚                             â””â”€â–º Create .token element
         â”‚                                 Append to cell
         â”‚                                 Handle stacking offset
         â”‚
         â”œâ”€â”€â–º updateTurnDisplay()
         â”‚         â””â”€â–º Show current player name & color
         â”‚
         â””â”€â”€â–º updatePlayersInfo()
                   â””â”€â–º Show token counts for each player
                       (ğŸ  in home | ğŸ¯ on board | âœ… finished)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9. NETWORK BROADCAST PATTERN                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Admin makes change
         â”‚
         â–¼
    broadcast(message)
         â”‚
         â”œâ”€â”€â–º For each conn in connections[]:
         â”‚         â”‚
         â”‚         â””â”€â”€â”€ conn.open? â”€â”€â–º conn.send(message)
         â”‚
         â–¼
    All connected players receive
         â”‚
         â””â”€â”€â–º handleMessage() â”€â”€â–º Update local gameState
                                   Update UI


    Message Types Flow:
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ requestGameStateâ”‚ â”€â”€â–º Player â†’ Admin (on connect)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   gameState     â”‚ â”€â”€â–º Admin â†’ Player (initial sync)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ playerSelected  â”‚ â”€â”€â–º Player â†’ Admin (slot chosen)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   gameState     â”‚ â”€â”€â–º Admin â†’ All (slot marked joined)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   gameStart     â”‚ â”€â”€â–º Admin â†’ All (game begins)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   diceRolled    â”‚ â”€â”€â–º Current Player â†’ All
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   tokenMoved    â”‚ â”€â”€â–º Current Player â†’ All
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   turnChanged   â”‚ â”€â”€â–º Current Player â†’ All
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   gameOver      â”‚ â”€â”€â–º Winner â†’ All
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10. UI SCREEN FLOW                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Admin     â”‚
    â”‚   Login     â”‚ â”€â”€â–º Enter password â”€â”€â–º initializeAdmin()
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
                                                 â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚  Player Setup   â”‚
                                        â”‚  (Admin Screen) â”‚
                                        â”‚                 â”‚
                                        â”‚  â€¢ Add slots    â”‚
                                        â”‚  â€¢ Edit names   â”‚
                                        â”‚  â€¢ Set colors   â”‚
                                        â”‚  â€¢ Upload pics  â”‚
                                        â”‚  â€¢ Share link   â”‚
                                        â”‚  â€¢ Start game   â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
                                                 â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚   Game Screen   â”‚
                                        â”‚                 â”‚
                                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                                        â”‚  â”‚   Board   â”‚  â”‚
                                        â”‚  â”‚  (Paths)  â”‚  â”‚
                                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                        â”‚                 â”‚
                                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                                        â”‚  â”‚   Dice    â”‚  â”‚
                                        â”‚  â”‚  Display  â”‚  â”‚
                                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                        â”‚                 â”‚
                                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                                        â”‚  â”‚  Players  â”‚  â”‚
                                        â”‚  â”‚   Info    â”‚  â”‚
                                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
                                                 â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ Winner Screen   â”‚
                                        â”‚                 â”‚
                                        â”‚  ğŸ† Winner!     â”‚
                                        â”‚  [New Game]     â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Player    â”‚
    â”‚   Join      â”‚ â”€â”€â–º Open link â”€â”€â–º joinAsPlayer()
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
                                            â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚ Player Select   â”‚
                                   â”‚                 â”‚
                                   â”‚  â”Œâ”€â”€â”€â”  â”Œâ”€â”€â”€â”  â”‚
                                   â”‚  â”‚P1 â”‚  â”‚P2 â”‚  â”‚
                                   â”‚  â”‚Redâ”‚  â”‚Grnâ”‚  â”‚
                                   â”‚  â””â”€â”€â”€â”˜  â””â”€â”€â”€â”˜  â”‚
                                   â”‚                 â”‚
                                   â”‚  Click to join  â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â–¼
                                   Wait for game start
                                            â”‚
                                            â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚   Game Screen   â”‚
                                   â”‚   (same as      â”‚
                                   â”‚    admin)       â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 11. TOKEN STATE TRANSITIONS                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Token Lifecycle:
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   IN HOME   â”‚
    â”‚ position=-1 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ Roll 6
          â”‚ moveTokenFromHome()
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ON BOARD   â”‚
    â”‚ position=0+ â”‚
    â”‚ inHomeStretch=false
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ Move around path
          â”‚ moveToken()
          â”‚
          â”œâ”€â”€â–º Capture opponent â”€â”€â–º Send opponent to home
          â”‚
          â”œâ”€â”€â–º Get captured â”€â”€â–º Back to home (position=-1)
          â”‚
          â”‚ Reach home stretch entry
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚HOME STRETCH â”‚
    â”‚ position=0-5â”‚
    â”‚ inHomeStretch=true
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ Exact roll to 6
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  FINISHED   â”‚
    â”‚ finished=true
    â”‚ position=6  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 12. GAME RULES ENFORCEMENT                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Roll Dice Rules:
    â”œâ”€â–º Only current turn player can roll
    â”œâ”€â–º Dice disabled after roll until move complete
    â””â”€â–º Roll = 6 grants extra turn

    Token Selection Rules:
    â”œâ”€â–º In home: Can only move on roll = 6
    â”œâ”€â–º On board: Can move any distance
    â”œâ”€â–º Home stretch: Cannot overshoot (position + roll <= 5)
    â””â”€â–º Finished: Cannot select

    Movement Rules:
    â”œâ”€â–º Cannot land on own token (blocking)
    â”œâ”€â–º Can capture opponent (except safe spots)
    â”œâ”€â–º Safe spots: START_POSITIONS + turn corners
    â”œâ”€â–º Star spots: Special marked positions
    â””â”€â–º Must enter home stretch at correct entry point

    Capture Rules:
    â”œâ”€â–º Opponent on same cell (not safe) â†’ back to home
    â”œâ”€â–º Captured token: position = -1
    â””â”€â–º Safe spots immune to capture

    Winning Rules:
    â”œâ”€â–º All 4 tokens must reach position 6 in home stretch
    â”œâ”€â–º Must use exact roll to finish
    â””â”€â–º First player to finish all tokens wins


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 13. ERROR HANDLING & EDGE CASES                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    PeerJS Connection Errors:
    â”œâ”€â–º peer.on('error') â”€â”€â–º Alert user, suggest refresh
    â”œâ”€â–º Connection timeout â”€â”€â–º Retry with STUN servers
    â””â”€â–º Disconnection â”€â”€â–º Remove from connections[]

    Game State Validation:
    â”œâ”€â–º Check myPlayerIndex !== null before actions
    â”œâ”€â–º Verify it's my turn before rolling dice
    â”œâ”€â–º Validate token selection against selectableTokens[]
    â””â”€â–º Check game started before allowing moves

    UI Edge Cases:
    â”œâ”€â–º Multiple tokens on same cell â”€â”€â–º Stack with offset
    â”œâ”€â–º Player slot already joined â”€â”€â–º Lock UI, show "âœ“ Joined"
    â”œâ”€â–º Game already started â”€â”€â–º Prevent new player selection
    â””â”€â–º Maximum 4 players â”€â”€â–º Disable add player button

    Race Conditions:
    â”œâ”€â–º Broadcast ensures all clients sync
    â”œâ”€â–º Admin is source of truth
    â””â”€â–º Players wait for broadcast before updating


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 14. KEY FUNCTIONS REFERENCE                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    INITIALIZATION:
    â”œâ”€â–º init()                    - Entry point
    â”œâ”€â–º setupEventListeners()     - Wire up buttons
    â”œâ”€â–º createPathCells()         - Draw board once
    â””â”€â–º checkIfJoining()          - Check URL for game code

    ADMIN:
    â”œâ”€â–º initializeAdmin()         - Create peer, setup host
    â”œâ”€â–º addPlayerSetup()          - Add player slot
    â”œâ”€â–º renderPlayerSetup()       - Show slot UI
    â”œâ”€â–º startGameAsAdmin()        - Initialize game state
    â””â”€â–º broadcastGameState()      - Sync all clients

    PLAYER:
    â”œâ”€â–º joinAsPlayer()            - Connect to admin
    â”œâ”€â–º showPlayerSelection()     - Display available slots
    â””â”€â–º selectPlayer()            - Choose slot

    NETWORKING:
    â”œâ”€â–º setupConnection()         - Wire up PeerJS connection
    â”œâ”€â–º handleMessage()           - Route incoming messages
    â””â”€â–º broadcast()               - Send to all connections

    GAME LOGIC:
    â”œâ”€â–º rollDice()                - Generate random 1-6
    â”œâ”€â–º getSelectableTokens()     - Compute valid moves
    â”œâ”€â–º moveTokenFromHome()       - Move from home to start
    â”œâ”€â–º moveToken()               - Move on board/home stretch
    â”œâ”€â–º captureToken()            - Send opponent home
    â”œâ”€â–º checkForWinner()          - Check if all tokens finished
    â””â”€â–º nextTurn()                - Advance to next player

    RENDERING:
    â”œâ”€â–º renderBoard()             - Draw all tokens
    â”œâ”€â–º updateDiceDisplay()       - Show dice result
    â”œâ”€â–º updateTurnDisplay()       - Show current player
    â”œâ”€â–º updatePlayersInfo()       - Show token counts
    â”œâ”€â–º highlightSelectableTokens() - Add click handlers
    â””â”€â–º clearSelectableTokens()   - Remove highlights

    UTILITIES:
    â”œâ”€â–º showScreen()              - Navigate between screens
    â”œâ”€â–º getColorHex()             - Convert color name to hex
    â”œâ”€â–º copyShareLink()           - Copy to clipboard
    â”œâ”€â–º shareOnWhatsApp()         - Open WhatsApp share
    â””â”€â–º showWinner()              - Display winner screen


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 15. COMPLETE SYSTEM FLOW (End-to-End)                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         DEVICE A (Admin)                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 1. Enter password
              â–¼
         Create PeerJS Peer (ID: abc123)
              â”‚
              â”‚ 2. Add player slots
              â–¼
         Share link: ?game=abc123
              â”‚
              â”‚ 3. Wait for players
              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Receive 'playerSelected' from B,C â”‚
         â”‚ Mark slots as joined               â”‚
         â”‚ Broadcast 'gameState'              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 4. Start game
              â–¼
         Initialize tokens
         Set currentTurn = red
         Broadcast 'gameStart'
              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                            â”‚                            â”‚
    â–¼                            â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚DEVICE B â”‚                â”‚DEVICE C â”‚                â”‚DEVICE D â”‚
â”‚(Player) â”‚                â”‚(Player) â”‚                â”‚(Player) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                            â”‚                            â”‚
    â”‚ Open link                  â”‚ Open link                  â”‚ Open link
    â–¼                            â–¼                            â–¼
Connect to abc123          Connect to abc123          Connect to abc123
    â”‚                            â”‚                            â”‚
    â”‚ Request state              â”‚ Request state              â”‚ Request state
    â–¼                            â–¼                            â–¼
Receive 'gameState'        Receive 'gameState'        Receive 'gameState'
    â”‚                            â”‚                            â”‚
    â”‚ Show player slots          â”‚ Show player slots          â”‚ Show player slots
    â–¼                            â–¼                            â–¼
Select "Player 1 (Red)"    Select "Player 2 (Green)"  Select "Player 3 (Yellow)"
    â”‚                            â”‚                            â”‚
    â”‚ Send 'playerSelected'      â”‚ Send 'playerSelected'      â”‚ Send 'playerSelected'
    â–¼                            â–¼                            â–¼
Wait for game start        Wait for game start        Wait for game start
    â”‚                            â”‚                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ Receive 'gameStart'
                                 â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  GAME BEGINS  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     TURN CYCLE                          â”‚
    â”‚                                                          â”‚
    â”‚  Red's Turn (Device B):                                 â”‚
    â”‚    1. Enable dice button                                â”‚
    â”‚    2. Click "Roll Dice" â†’ roll = 6                      â”‚
    â”‚    3. Broadcast 'diceRolled'                            â”‚
    â”‚    4. All devices show dice = 6                         â”‚
    â”‚    5. Device B highlights selectable tokens             â”‚
    â”‚    6. Click token â†’ moveTokenFromHome()                 â”‚
    â”‚    7. Broadcast 'tokenMoved'                            â”‚
    â”‚    8. All devices update board                          â”‚
    â”‚    9. Roll was 6 â†’ enable dice again                    â”‚
    â”‚   10. Roll again â†’ roll = 3                             â”‚
    â”‚   11. Move token 3 spaces                               â”‚
    â”‚   12. Broadcast 'tokenMoved'                            â”‚
    â”‚   13. Roll != 6 â†’ broadcast 'turnChanged'               â”‚
    â”‚                                                          â”‚
    â”‚  Green's Turn (Device C):                               â”‚
    â”‚    1. Receive 'turnChanged' â†’ currentTurn = green       â”‚
    â”‚    2. Device C enables dice                             â”‚
    â”‚    3. Devices A,B,D disable dice                        â”‚
    â”‚    4. ... (repeat cycle)                                â”‚
    â”‚                                                          â”‚
    â”‚  Yellow's Turn (Device D):                              â”‚
    â”‚    ... (repeat cycle)                                   â”‚
    â”‚                                                          â”‚
    â”‚  Continue until one player finishes all 4 tokens        â”‚
    â”‚                                                          â”‚
    â”‚  Winner:                                                â”‚
    â”‚    1. checkForWinner() â†’ all tokens finished            â”‚
    â”‚    2. Broadcast 'gameOver'                              â”‚
    â”‚    3. All devices show winner screen                    â”‚
    â”‚    4. Display winner avatar & name                      â”‚
    â”‚    5. Show "New Game" button                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 16. MEMORY & STATE MANAGEMENT                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Global Variables:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ peer              - PeerJS instance                     â”‚
    â”‚ connections[]     - Array of DataConnection objects     â”‚
    â”‚ gameState         - Single source of truth              â”‚
    â”‚ myPlayerId        - This device's peer ID               â”‚
    â”‚ myPlayerIndex     - Which slot I selected (0-3)         â”‚
    â”‚ isAdmin           - Boolean flag                        â”‚
    â”‚ gameCode          - Admin's peer ID (for joining)       â”‚
    â”‚ playerCounter     - Auto-increment for default names    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    State Synchronization:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Admin:                                                  â”‚
    â”‚   - Maintains authoritative gameState                   â”‚
    â”‚   - Broadcasts changes to all connections               â”‚
    â”‚   - Receives player actions, updates state, broadcasts  â”‚
    â”‚                                                         â”‚
    â”‚ Players:                                                â”‚
    â”‚   - Receive gameState updates                           â”‚
    â”‚   - Send actions (dice roll, token move)                â”‚
    â”‚   - Wait for broadcast confirmation before UI update    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 17. BOARD COORDINATE SYSTEM                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Board Layout (Percentage-based positioning):
    
         0%                    50%                   100%
    0%   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                      â”‚                      â”‚
         â”‚    YELLOW HOME       â”‚    YELLOW HOME       â”‚
         â”‚      AREA            â”‚      AREA            â”‚
         â”‚                      â”‚                      â”‚
         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
         â”‚         â”‚  13  14  15â”‚16  17  18  â”‚         â”‚
         â”‚         â”‚            â”‚            â”‚         â”‚
    25%  â”‚         â”‚  12        â”‚        19  â”‚         â”‚
         â”‚         â”‚            â”‚            â”‚         â”‚
         â”‚         â”‚  11        â”‚        20  â”‚         â”‚
         â”‚         â”‚            â”‚            â”‚         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚  10  9  8  7  6  5   â”‚   â–²HOMEâ–²  â”‚ 21 22 23â”‚
         â”‚                      â”‚  STRETCH  â”‚         â”‚
    40%  â”‚â—„â”€RED START (0-4)â”€â”€â”€â”€â”€â”¤   CENTER  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                      â”‚  â—„â–ºâ—„â–ºâ—„â–ºâ—„â–º â”‚         â”‚
    50%  â”‚                      â”‚           â”‚         â”‚
         â”‚ 50 49 48 47 46 45    â”‚   â–¼HOMEâ–¼  â”‚ 24 25 26â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚         â”‚  51        â”‚        27  â”‚         â”‚
         â”‚         â”‚            â”‚            â”‚         â”‚
    60%  â”‚         â”‚   0        â”‚        28  â”‚         â”‚
         â”‚         â”‚            â”‚            â”‚         â”‚
         â”‚         â”‚  â–²1   2  3 â”‚ 4  29  30  â”‚         â”‚
         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
         â”‚                      â”‚                      â”‚
    75%  â”‚    BLUE HOME         â”‚    GREEN HOME        â”‚
         â”‚      AREA            â”‚      AREA            â”‚
         â”‚                      â”‚                      â”‚
   100%  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Path Position Mapping:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Position  â”‚ Location      â”‚ Color Start â”‚ Special  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚    0      â”‚ Left-Mid      â”‚ RED START   â”‚ SAFE     â”‚
    â”‚    5      â”‚ Left-Top Turn â”‚             â”‚ SAFE+STARâ”‚
    â”‚   13      â”‚ Top-Mid       â”‚ YELLOW STARTâ”‚ SAFE     â”‚
    â”‚   19      â”‚ Top-Right Turnâ”‚             â”‚ SAFE+STARâ”‚
    â”‚   26      â”‚ Right-Mid     â”‚ GREEN START â”‚ SAFE     â”‚
    â”‚   32      â”‚ Right-Bot Turnâ”‚             â”‚ SAFE+STARâ”‚
    â”‚   39      â”‚ Bottom-Mid    â”‚ BLUE START  â”‚ SAFE     â”‚
    â”‚   44      â”‚ Bot-Left Turn â”‚             â”‚ SAFE+STARâ”‚
    â”‚  0-51     â”‚ Main Loop     â”‚             â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Home Stretch Paths (Final 6 positions before center):
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RED:    Horizontal (left to right) â†’ Center          â”‚
    â”‚ YELLOW: Vertical (top to bottom) â†’ Center            â”‚
    â”‚ GREEN:  Horizontal (right to left) â†’ Center          â”‚
    â”‚ BLUE:   Vertical (bottom to top) â†’ Center            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Home Stretch Entry Points:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RED:    Position 50 â†’ Enter home stretch             â”‚
    â”‚ YELLOW: Position 11 â†’ Enter home stretch             â”‚
    â”‚ GREEN:  Position 24 â†’ Enter home stretch             â”‚
    â”‚ BLUE:   Position 37 â†’ Enter home stretch             â”‚
    â”‚                                                      â”‚
    â”‚ Formula: (START_POSITION + 50) % 52                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 18. CSS CLASSES & STYLING LOGIC                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Path Cells:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ .path-cell                - Base cell (4% x 4%)      â”‚
    â”‚ .path-cell.safe           - Safe spot (border style) â”‚
    â”‚ .path-cell.star           - Star spot (â˜… marker)     â”‚
    â”‚ .path-cell.start-red      - Red start position       â”‚
    â”‚ .path-cell.start-green    - Green start position     â”‚
    â”‚ .path-cell.start-yellow   - Yellow start position    â”‚
    â”‚ .path-cell.start-blue     - Blue start position      â”‚
    â”‚ .path-cell.home-stretch-* - Colored home path        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Tokens:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ .token                    - Base token style         â”‚
    â”‚ .token.red                - Red colored token        â”‚
    â”‚ .token.green              - Green colored token      â”‚
    â”‚ .token.yellow             - Yellow colored token     â”‚
    â”‚ .token.blue               - Blue colored token       â”‚
    â”‚ .token.selectable         - Clickable (pulsing)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Home Area:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ .home-area                - Corner home zones        â”‚
    â”‚ .home-tokens              - Token container          â”‚
    â”‚ .home-token               - Individual slot          â”‚
    â”‚ .home-token.has-token     - Slot occupied            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Screens:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ .screen                   - Base screen (hidden)     â”‚
    â”‚ .screen.active            - Visible screen           â”‚
    â”‚ #adminLogin               - Password entry           â”‚
    â”‚ #playerSetupSection       - Admin slot setup         â”‚
    â”‚ #playerSelect             - Player slot selection    â”‚
    â”‚ #gameScreen               - Main game board          â”‚
    â”‚ #winnerScreen             - Victory display          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 19. ANIMATION & VISUAL FEEDBACK                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Dice Roll Animation:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. User clicks "Roll Dice"                           â”‚
    â”‚ 2. Button disabled                                   â”‚
    â”‚ 3. Dice emoji rotates (CSS animation)                â”‚
    â”‚ 4. Display result after 0.5s                         â”‚
    â”‚ 5. Highlight selectable tokens (pulse effect)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Token Movement:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Token highlighted (selectable class)              â”‚
    â”‚ 2. User clicks token                                 â”‚
    â”‚ 3. Token moves to new position (instant)             â”‚
    â”‚ 4. Board re-renders all tokens                       â”‚
    â”‚ 5. Captured tokens disappear from board              â”‚
    â”‚ 6. Reappear in home area                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Turn Indicator:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â€¢ Current player name shown in their color           â”‚
    â”‚ â€¢ Player info card highlighted (.active)             â”‚
    â”‚ â€¢ Dice button enabled only for current player        â”‚
    â”‚ â€¢ Other players see disabled state                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Token Stacking:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â€¢ Multiple tokens on same cell offset by 3px         â”‚
    â”‚ â€¢ Z-index incremented for each stacked token         â”‚
    â”‚ â€¢ Visual indication of multiple pieces               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 20. SECURITY & VALIDATION                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Admin Protection:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â€¢ Password required (ADMIN_PASSWORD = "family2024")  â”‚
    â”‚ â€¢ Only admin can start game                          â”‚
    â”‚ â€¢ Only admin can modify player slots                 â”‚
    â”‚ â€¢ Admin controls game state authority                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Turn Validation:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â€¢ Check myPlayerIndex !== null                       â”‚
    â”‚ â€¢ Verify gameState.currentTurn === myColor           â”‚
    â”‚ â€¢ Validate token in selectableTokens[]               â”‚
    â”‚ â€¢ Prevent actions when not your turn                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Movement Validation:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â€¢ Check token ownership (color match)                â”‚
    â”‚ â€¢ Verify dice has been rolled                        â”‚
    â”‚ â€¢ Validate destination not blocked by own token      â”‚
    â”‚ â€¢ Check home stretch bounds (0-5)                    â”‚
    â”‚ â€¢ Require exact roll to finish                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Network Validation:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â€¢ Check connection.open before sending               â”‚
    â”‚ â€¢ Verify message type in handleMessage()             â”‚
    â”‚ â€¢ Validate gameState structure                       â”‚
    â”‚ â€¢ Handle disconnections gracefully                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 21. OPTIMIZATION & PERFORMANCE                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Rendering Optimization:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â€¢ Path cells created once (createPathCells)          â”‚
    â”‚ â€¢ Only tokens re-rendered on state change            â”‚
    â”‚ â€¢ Remove all tokens, then redraw (simple strategy)   â”‚
    â”‚ â€¢ CSS transforms for positioning (GPU accelerated)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Network Optimization:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â€¢ Broadcast only on state changes                    â”‚
    â”‚ â€¢ Send minimal data (type + essential fields)        â”‚
    â”‚ â€¢ Use PeerJS data channels (not media)               â”‚
    â”‚ â€¢ STUN servers for NAT traversal                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Memory Management:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â€¢ Remove event listeners with cloneNode()            â”‚
    â”‚ â€¢ Clean up closed connections from array             â”‚
    â”‚ â€¢ Reuse gameState object (mutate in place)           â”‚
    â”‚ â€¢ Avatar images as base64 (embedded in state)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 22. DEBUGGING & TROUBLESHOOTING                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Common Issues:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Connection Failed:                                   â”‚
    â”‚   â€¢ Check PeerJS server status (0.peerjs.com)        â”‚
    â”‚   â€¢ Verify STUN servers accessible                   â”‚
    â”‚   â€¢ Try refreshing both devices                      â”‚
    â”‚   â€¢ Check firewall/network restrictions              â”‚
    â”‚                                                      â”‚
    â”‚ Dice Not Working:                                    â”‚
    â”‚   â€¢ Verify myPlayerIndex is set                      â”‚
    â”‚   â€¢ Check if it's your turn (currentTurn)            â”‚
    â”‚   â€¢ Ensure gameStarted === true                      â”‚
    â”‚   â€¢ Look for disabled button state                   â”‚
    â”‚                                                      â”‚
    â”‚ Tokens Not Moving:                                   â”‚
    â”‚   â€¢ Check selectableTokens[] not empty               â”‚
    â”‚   â€¢ Verify token has .selectable class               â”‚
    â”‚   â€¢ Ensure click handler attached                    â”‚
    â”‚   â€¢ Check for blocking validation errors             â”‚
    â”‚                                                      â”‚
    â”‚ State Desync:                                        â”‚
    â”‚   â€¢ Admin broadcasts on every change                 â”‚
    â”‚   â€¢ Players wait for broadcast before updating       â”‚
    â”‚   â€¢ Check network messages in console                â”‚
    â”‚   â€¢ Verify handleMessage() routing                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Console Logging Strategy:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ â€¢ Log peer.on('open') with ID                        â”‚
    â”‚ â€¢ Log each broadcast message type                    â”‚
    â”‚ â€¢ Log handleMessage() received types                 â”‚
    â”‚ â€¢ Log state changes (currentTurn, positions)         â”‚
    â”‚ â€¢ Log validation failures (blocked, no moves)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
         0%                    50%                   100%
    0%   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬
